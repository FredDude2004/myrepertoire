{"ast":null,"code":"var _jsxFileName = \"/home/fred/Desktop/projects/myrepertoire.io/src/components/Pieces/Piece.js\",\n  _s = $RefreshSig$();\nimport arbiter from \"../../arbiter/arbiter\";\nimport { useAppContext } from \"../../contexts/Context\";\nimport { generateCandidates } from \"../../reducer/actions/move\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Piece = _ref => {\n  _s();\n  let {\n    rank,\n    file,\n    piece\n  } = _ref;\n  const {\n    appState,\n    dispatch\n  } = useAppContext();\n  const {\n    turn,\n    castleDirection,\n    position: currentPosition\n  } = appState;\n  const onDragStart = e => {\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", `${piece},${rank},${file}`);\n    setTimeout(() => {\n      e.target.style.display = \"none\";\n    }, 0);\n    if (turn === piece[0]) {\n      const candidateMoves = arbiter.getValidMoves({\n        position: currentPosition[currentPosition.length - 1],\n        prevPosition: currentPosition[currentPosition.length - 2],\n        castleDirection: castleDirection[turn],\n        piece,\n        file,\n        rank\n      });\n      dispatch(generateCandidates({\n        candidateMoves\n      }));\n    }\n  };\n  const onDragEnd = e => {\n    e.target.style.display = \"block\";\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `piece ${piece} p-${file}${rank}`,\n    draggable: true,\n    onDragStart: onDragStart,\n    onDragEnd: onDragEnd\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n_s(Piece, \"Sp8isE722iafHYnlNiP1TMTdChI=\", false, function () {\n  return [useAppContext];\n});\n_c = Piece;\nexport default Piece;\nvar _c;\n$RefreshReg$(_c, \"Piece\");","map":{"version":3,"names":["arbiter","useAppContext","generateCandidates","jsxDEV","_jsxDEV","Piece","_ref","_s","rank","file","piece","appState","dispatch","turn","castleDirection","position","currentPosition","onDragStart","e","dataTransfer","effectAllowed","setData","setTimeout","target","style","display","candidateMoves","getValidMoves","length","prevPosition","onDragEnd","className","draggable","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/fred/Desktop/projects/myrepertoire.io/src/components/Pieces/Piece.js"],"sourcesContent":["import arbiter from \"../../arbiter/arbiter\";\nimport { useAppContext } from \"../../contexts/Context\";\nimport { generateCandidates } from \"../../reducer/actions/move\";\n\nconst Piece = ({ rank, file, piece }) => {\n  const { appState, dispatch } = useAppContext();\n  const { turn, castleDirection, position: currentPosition } = appState;\n\n  const onDragStart = (e) => {\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", `${piece},${rank},${file}`);\n    setTimeout(() => {\n      e.target.style.display = \"none\";\n    }, 0);\n\n    if (turn === piece[0]) {\n      const candidateMoves = arbiter.getValidMoves({\n        position: currentPosition[currentPosition.length - 1],\n        prevPosition: currentPosition[currentPosition.length - 2],\n        castleDirection: castleDirection[turn],\n        piece,\n        file,\n        rank,\n      });\n      dispatch(generateCandidates({ candidateMoves }));\n    }\n  };\n  const onDragEnd = (e) => {\n    e.target.style.display = \"block\";\n  };\n\n  return (\n    <div\n      className={`piece ${piece} p-${file}${rank}`}\n      draggable={true}\n      onDragStart={onDragStart}\n      onDragEnd={onDragEnd}\n    />\n  );\n};\n\nexport default Piece;\n"],"mappings":";;AAAA,OAAOA,OAAO,MAAM,uBAAuB;AAC3C,SAASC,aAAa,QAAQ,wBAAwB;AACtD,SAASC,kBAAkB,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhE,MAAMC,KAAK,GAAGC,IAAA,IAA2B;EAAAC,EAAA;EAAA,IAA1B;IAAEC,IAAI;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAAJ,IAAA;EAClC,MAAM;IAAEK,QAAQ;IAAEC;EAAS,CAAC,GAAGX,aAAa,CAAC,CAAC;EAC9C,MAAM;IAAEY,IAAI;IAAEC,eAAe;IAAEC,QAAQ,EAAEC;EAAgB,CAAC,GAAGL,QAAQ;EAErE,MAAMM,WAAW,GAAIC,CAAC,IAAK;IACzBA,CAAC,CAACC,YAAY,CAACC,aAAa,GAAG,MAAM;IACrCF,CAAC,CAACC,YAAY,CAACE,OAAO,CAAC,YAAY,EAAE,GAAGX,KAAK,IAAIF,IAAI,IAAIC,IAAI,EAAE,CAAC;IAChEa,UAAU,CAAC,MAAM;MACfJ,CAAC,CAACK,MAAM,CAACC,KAAK,CAACC,OAAO,GAAG,MAAM;IACjC,CAAC,EAAE,CAAC,CAAC;IAEL,IAAIZ,IAAI,KAAKH,KAAK,CAAC,CAAC,CAAC,EAAE;MACrB,MAAMgB,cAAc,GAAG1B,OAAO,CAAC2B,aAAa,CAAC;QAC3CZ,QAAQ,EAAEC,eAAe,CAACA,eAAe,CAACY,MAAM,GAAG,CAAC,CAAC;QACrDC,YAAY,EAAEb,eAAe,CAACA,eAAe,CAACY,MAAM,GAAG,CAAC,CAAC;QACzDd,eAAe,EAAEA,eAAe,CAACD,IAAI,CAAC;QACtCH,KAAK;QACLD,IAAI;QACJD;MACF,CAAC,CAAC;MACFI,QAAQ,CAACV,kBAAkB,CAAC;QAAEwB;MAAe,CAAC,CAAC,CAAC;IAClD;EACF,CAAC;EACD,MAAMI,SAAS,GAAIZ,CAAC,IAAK;IACvBA,CAAC,CAACK,MAAM,CAACC,KAAK,CAACC,OAAO,GAAG,OAAO;EAClC,CAAC;EAED,oBACErB,OAAA;IACE2B,SAAS,EAAE,SAASrB,KAAK,MAAMD,IAAI,GAAGD,IAAI,EAAG;IAC7CwB,SAAS,EAAE,IAAK;IAChBf,WAAW,EAAEA,WAAY;IACzBa,SAAS,EAAEA;EAAU;IAAAG,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAEN,CAAC;AAAC7B,EAAA,CAnCIF,KAAK;EAAA,QACsBJ,aAAa;AAAA;AAAAoC,EAAA,GADxChC,KAAK;AAqCX,eAAeA,KAAK;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}