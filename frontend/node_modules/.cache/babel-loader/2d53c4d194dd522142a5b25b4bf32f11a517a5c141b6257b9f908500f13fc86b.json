{"ast":null,"code":"var _jsxFileName = \"/home/fred/Desktop/projects/myrepertoire.io/frontend/src/components/Popup/PromotionBox/PromotionBox.js\",\n  _s = $RefreshSig$();\nimport { useAppContext } from \"../../../contexts/Context\";\nimport { copyPosition, getNewMoveNotation } from \"../../../helper\";\nimport { makeNewMove, clearCandidates } from \"../../../reducer/actions/move\";\nimport \"./PromotionBox.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PromotionBox = _ref => {\n  _s();\n  let {\n    onClosePopup\n  } = _ref;\n  const {\n    appState,\n    dispatch\n  } = useAppContext();\n  const {\n    promotionSquare\n  } = appState;\n  if (!promotionSquare) return null;\n  const color = promotionSquare.x === 7 ? \"w\" : \"b\";\n  const options = [\"q\", \"r\", \"b\", \"n\"];\n  const getPromotionBoxPosition = () => {\n    let style = {};\n    if (promotionSquare.x === 7) {\n      style.top = \"-12.5%\";\n    } else {\n      style.top = \"97.5%\";\n    }\n    if (promotionSquare.y <= 1) {\n      style.left = \"0%\";\n    } else if (promotionSquare.y >= 5) {\n      style.right = \"0%\";\n    } else {\n      style.left = `${12.5 * promotionSquare.y - 20}%`;\n    }\n    return style;\n  };\n  const onClick = option => {\n    onClosePopup();\n    const newPosition = copyPosition(appState.position[appState.position.length - 1]);\n    newPosition[promotionSquare.rank][promotionSquare.file] = \"\";\n    newPosition[promotionSquare.x][promotionSquare.y] = color + option;\n    const newMove = getNewMoveNotation({\n      ...promotionSquare,\n      position: appState.position[appState.position.length - 1],\n      promotesTo: option,\n      piece: promotionSquare.x === 7 ? \"wp\" : \"bp\"\n    });\n    dispatch(clearCandidates());\n    dispatch(makeNewMove({\n      newPosition,\n      newMove\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup--inner promotion-choices\",\n    style: getPromotionBoxPosition(),\n    children: options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => onClick(option),\n      className: `piece ${color}${option}`\n    }, option, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(PromotionBox, \"Sp8isE722iafHYnlNiP1TMTdChI=\", false, function () {\n  return [useAppContext];\n});\n_c = PromotionBox;\nexport default PromotionBox;\nvar _c;\n$RefreshReg$(_c, \"PromotionBox\");","map":{"version":3,"names":["useAppContext","copyPosition","getNewMoveNotation","makeNewMove","clearCandidates","jsxDEV","_jsxDEV","PromotionBox","_ref","_s","onClosePopup","appState","dispatch","promotionSquare","color","x","options","getPromotionBoxPosition","style","top","y","left","right","onClick","option","newPosition","position","length","rank","file","newMove","promotesTo","piece","className","children","map","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/fred/Desktop/projects/myrepertoire.io/frontend/src/components/Popup/PromotionBox/PromotionBox.js"],"sourcesContent":["import { useAppContext } from \"../../../contexts/Context\";\nimport { copyPosition, getNewMoveNotation } from \"../../../helper\";\nimport { makeNewMove, clearCandidates } from \"../../../reducer/actions/move\";\nimport \"./PromotionBox.css\";\n\nconst PromotionBox = ({ onClosePopup }) => {\n  const { appState, dispatch } = useAppContext();\n  const { promotionSquare } = appState;\n\n  if (!promotionSquare) return null;\n\n  const color = promotionSquare.x === 7 ? \"w\" : \"b\";\n  const options = [\"q\", \"r\", \"b\", \"n\"];\n\n  const getPromotionBoxPosition = () => {\n    let style = {};\n\n    if (promotionSquare.x === 7) {\n      style.top = \"-12.5%\";\n    } else {\n      style.top = \"97.5%\";\n    }\n\n    if (promotionSquare.y <= 1) {\n      style.left = \"0%\";\n    } else if (promotionSquare.y >= 5) {\n      style.right = \"0%\";\n    } else {\n      style.left = `${12.5 * promotionSquare.y - 20}%`;\n    }\n\n    return style;\n  };\n\n  const onClick = (option) => {\n    onClosePopup();\n    const newPosition = copyPosition(\n      appState.position[appState.position.length - 1]\n    );\n\n    newPosition[promotionSquare.rank][promotionSquare.file] = \"\";\n    newPosition[promotionSquare.x][promotionSquare.y] = color + option;\n\n    const newMove = getNewMoveNotation({\n      ...promotionSquare,\n      position: appState.position[appState.position.length - 1],\n      promotesTo: option,\n      piece: promotionSquare.x === 7 ? \"wp\" : \"bp\",\n    });\n    dispatch(clearCandidates());\n\n    dispatch(makeNewMove({ newPosition, newMove }));\n  };\n\n  return (\n    <div\n      className=\"popup--inner promotion-choices\"\n      style={getPromotionBoxPosition()}\n    >\n      {options.map((option) => (\n        <div\n          key={option}\n          onClick={() => onClick(option)}\n          className={`piece ${color}${option}`}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default PromotionBox;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}